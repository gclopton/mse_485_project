# rim_langevin.in — robust x–y rim sponge (units metal)
# Expects: RIM_WIDTH_NM (nm), RIM_GAMMA (ps^-1), RIM_TK (K) via -var

# Local RNG seed (kept distinct to avoid collisions)
variable rim_seed equal 98765

# Convert rim width to Å
variable rim_wA   equal ${RIM_WIDTH_NM}*10.0

# Capture box bounds into local variables (numbers)
variable bxlo     equal xlo
variable bxhi     equal xhi
variable bylo     equal ylo
variable byhi     equal yhi

# Precompute slab faces (NO spaces in expressions to keep parser happy)
variable bxlo_hi  equal v_bxlo+v_rim_wA
variable bxhi_lo  equal v_bxhi-v_rim_wA
variable bylo_hi  equal v_bylo+v_rim_wA
variable byhi_lo  equal v_byhi-v_rim_wA

# Four x/y edge slabs; thickness = rim_wA
region rim_xlo block v_bxlo    v_bxlo_hi  INF INF INF INF units box
region rim_xhi block v_bxhi_lo v_bxhi     INF INF INF INF units box
region rim_ylo block INF INF   v_bylo     v_bylo_hi  INF INF units box
region rim_yhi block INF INF   v_byhi_lo  v_byhi     INF INF units box

# Union into one rim group
group rim region rim_xlo
group rim union rim rim_xhi
group rim union rim rim_ylo
group rim union rim rim_yhi

# Langevin thermostat on the rim only (interior integrates elsewhere)
fix f_rim rim langevin ${RIM_TK} ${RIM_TK} ${RIM_GAMMA} ${rim_seed} zero yes

# Optional sanity print
print "rim_langevin: bxlo=${bxlo} bxhi=${bxhi} bylo=${bylo} byhi=${byhi} rim_wA=${rim_wA}" screen yes
